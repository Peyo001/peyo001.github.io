// Syst√®me de traduction
const translations = {
  en: {
    // Navigation
    navPortfolio: "Portfolio",
    navAbout: "About",
    navCV: "CV",
    
    // Header
    headerTitle: "Michelena Peyo",
    headerSubtitle: "Computer Science Student ‚Äì BUT Informatique",
    
    // About section
    aboutTitle: "About Me",
    aboutText: "I am a second-year Bachelor student in Computer Science (BUT2).",
    viewCV: "üìÑ View My CV",
    
    // CV section
    download: "Download",
    profile: "Profile",
    profileText: "BUT Informatique student focused on algorithms, data structures, and modern web development. I enjoy solving complex problems and turning ideas into products.",
    experience: "Experience",
    education: "Education",
    technicalProficiency: "Technical Proficiency",
    projects: "Projects",
    coreSkills: "Core Skills",
    languages: "Languages",
    interests: "Interests",
    frenchNative: "French (native)",
    englishB2: "English (B2)",
    spanishA2: "Spanish (A2)",
    sports: "Sports: basketball and football (club and occasional practice)",
    videoGames: "Video games with friends online",
    
    // Profile card
    computerScienceStudent: "Computer Science Student",
    profileDescription: "Hi! I'm a computer science student who loves web development and programming in general. I enjoy learning new technologies and make somes projects.",
    
    // Experience
    seasonalWorker: "Seasonal worker ‚Äì EARL LAMAYSOUETTE",
    internFlashcompo: "Intern ‚Äì Flashcompo",
    webDesignMarketing: "Web design & digital marketing",
    internDescription: "Discovered teamwork and business environment; assisted on tasks.",
    retailMember: "Retail team member ‚Äì Carrefour",
    customerService: "Customer service & operations",
    duringSchoolYear: "During school year",
    
    // Education
    butInfo: "BUT Informatique",
    butInfoDescription: "French diploma of higher education in Computer Science (programming, algorithms, databases, web).",
    generalBaccalaureate: "General Baccalaureate",
    specialization: "Specialization: computer science and programming.",
    
    // Projects
    portfolioWebsite: "Portfolio Website",
    portfolioDescription: "Responsive portfolio with dark mode, animations and interactive elements",
    soundRise: "Creation of a fictional web application to allow people to share and discover music",
    soundRiseDescription: "SoundRise is a fictional web app that connects music lovers and creators. Users can upload, share, and discover tracks in a community-driven space. Designed as a school project, it highlights my skills in web design, UX, and feature planning.",
    dataAnalysis: "Data Analysis with Python",
    dataAnalysisDescription: "A Python-based tool to analyze website traffic data using SQL and visualize it with Matplotlib.",
    cdPlayer: "CD Player with Qt and C++",
    cdPlayerDescription: "A desktop application simulating a CD player, built using the Qt framework and C++. It supports audio playback, track navigation, and real-time progress display.",
    viewDescription: "View Description of Project",
    viewProject: "View Project",
    
    // Modal
    cvPreview: "CV Preview",
    close: "Close",
    
    // Page title
    pageTitle: "Portfolio - Computer Science Student"
  },
  fr: {
    // Navigation
    navPortfolio: "Portfolio",
    navAbout: "√Ä propos",
    navCV: "CV",
    
    // Header
    headerTitle: "Michelena Peyo",
    headerSubtitle: "√âtudiant en Informatique ‚Äì BUT Informatique",
    
    // About section
    aboutTitle: "√Ä propos de moi",
    aboutText: "Je suis √©tudiant en deuxi√®me ann√©e de Bachelor en Informatique (BUT2).",
    viewCV: "üìÑ Voir mon CV",
    
    // CV section
    download: "T√©l√©charger",
    profile: "Profil",
    profileText: "√âtudiant en BUT Informatique ax√© sur les algorithmes, les structures de donn√©es et le d√©veloppement web moderne. J'aime r√©soudre des probl√®mes complexes et transformer des id√©es en produits.",
    experience: "Exp√©rience",
    education: "Formation",
    technicalProficiency: "Comp√©tences Techniques",
    projects: "Projets",
    coreSkills: "Comp√©tences Principales",
    languages: "Langues",
    interests: "Centres d'int√©r√™t",
    frenchNative: "Fran√ßais (natif)",
    englishB2: "Anglais (B2)",
    spanishA2: "Espagnol (A2)",
    sports: "Sports : basketball et football (club et pratique occasionnelle)",
    videoGames: "Jeux vid√©o entre amis en ligne",
    
    // Profile card
    computerScienceStudent: "√âtudiant en Informatique",
    profileDescription: "Salut ! Je suis un √©tudiant en informatique qui adore le d√©veloppement web et la programmation en g√©n√©ral. J'aime apprendre de nouvelles technologies et r√©aliser des projets.",
    
    // Experience
    seasonalWorker: "Travailleur saisonnier ‚Äì EARL LAMAYSOUETTE",
    internFlashcompo: "Stagiaire ‚Äì Flashcompo",
    webDesignMarketing: "Web design & marketing digital",
    internDescription: "D√©couverte du travail en √©quipe et de l'environnement professionnel ; assistance sur diverses t√¢ches.",
    retailMember: "Caissier ‚Äì Carrefour",
    customerService: "Service client & op√©rations",
    duringSchoolYear: "Pendant l'ann√©e scolaire",
    
    // Education
    butInfo: "BUT Informatique",
    butInfoDescription: "Dipl√¥me universitaire fran√ßais en Informatique (programmation, algorithmes, bases de donn√©es, web).",
    generalBaccalaureate: "Baccalaur√©at G√©n√©ral",
    specialization: "Sp√©cialisation : informatique et programmation.",
    
    // Projects
    portfolioWebsite: "Site Web Portfolio",
    portfolioDescription: "Portfolio responsive avec mode sombre, animations et √©l√©ments interactifs",
    soundRise: "Cr√©ation d'une application web fictive pour permettre aux gens de partager et d√©couvrir de la musique",
    soundRiseDescription: "SoundRise est une application web fictive qui connecte les amateurs de musique et les cr√©ateurs. Les utilisateurs peuvent t√©l√©charger, partager et d√©couvrir des morceaux dans un espace communautaire. Con√ßu comme un projet scolaire, il met en valeur mes comp√©tences en design web, UX et planification de fonctionnalit√©s.",
    dataAnalysis: "Analyse de donn√©es avec Python",
    dataAnalysisDescription: "Un outil bas√© sur Python pour analyser les donn√©es de trafic de site web en utilisant SQL et les visualiser avec Matplotlib.",
    cdPlayer: "Lecteur CD avec Qt et C++",
    cdPlayerDescription: "Une application de bureau simulant un lecteur CD, construite avec le framework Qt et C++. Elle prend en charge la lecture audio, la navigation entre pistes et l'affichage de la progression en temps r√©el.",
    viewDescription: "Voir la description du projet",
    viewProject: "Voir le projet",
    
    // Modal
    cvPreview: "Aper√ßu du CV",
    close: "Fermer",
    
    // Page title
    pageTitle: "Portfolio - √âtudiant en Informatique"
  }
};

// Fonction pour obtenir la langue actuelle
function getCurrentLanguage() {
  return localStorage.getItem('language') || 'en';
}

// Fonction pour d√©finir la langue
function setLanguage(lang) {
  localStorage.setItem('language', lang);
  const htmlLang = document.getElementById('htmlLang') || document.documentElement;
  htmlLang.lang = lang;
  updatePageContent(lang);
  updateLangIcon(lang);
}

// Fonction pour mettre √† jour le contenu de la page
function updatePageContent(lang) {
  const t = translations[lang];
  
  // Mettre √† jour le titre de la page
  if (t.pageTitle) {
    document.title = t.pageTitle;
  }
  
  // Mettre √† jour tous les √©l√©ments avec data-i18n
  document.querySelectorAll('[data-i18n]').forEach(element => {
    const key = element.getAttribute('data-i18n');
    if (t[key]) {
      if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
        element.value = t[key];
      } else {
        element.textContent = t[key];
      }
    }
  });
  
  // Mettre √† jour les attributs title et placeholder
  document.querySelectorAll('[data-i18n-title]').forEach(element => {
    const key = element.getAttribute('data-i18n-title');
    if (t[key]) {
      element.title = t[key];
    }
  });
  
  document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
    const key = element.getAttribute('data-i18n-placeholder');
    if (t[key]) {
      element.placeholder = t[key];
    }
  });
}

// Fonction pour mettre √† jour l'ic√¥ne de langue
function updateLangIcon(lang) {
  const langIcon = document.getElementById('langIcon');
  if (langIcon) {
    langIcon.textContent = lang === 'fr' ? 'En' : 'üá´üá∑';
  }
}

// Gestion du mode sombre
function initDarkMode() {
  const darkModeToggle = document.getElementById('darkModeToggle');
  const darkModeIcon = document.getElementById('darkModeIcon');
  
  if (darkModeToggle && darkModeIcon) {
    darkModeToggle.addEventListener('click', function() {
      document.body.classList.toggle('dark-mode');
      darkModeIcon.textContent = document.body.classList.contains('dark-mode') ? '‚òÄÔ∏è' : 'üåô';
      localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
    });
    
    // Restaurer le mode sombre si sauvegard√©
    if (localStorage.getItem('darkMode') === 'true') {
      document.body.classList.add('dark-mode');
      darkModeIcon.textContent = '‚òÄÔ∏è';
    }
  }
}

// Gestion du scroll smooth
function initSmoothScroll() {
  document.querySelectorAll('[data-scroll-to]').forEach(el => {
    el.addEventListener('click', function (e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('data-scroll-to'));
      if (target) {
        target.scrollIntoView({
          behavior: 'smooth',
          block: 'start'
        });
      }
    });
  });
}

// Initialiser tout au chargement
document.addEventListener('DOMContentLoaded', function() {
  // Initialiser la langue
  const currentLang = getCurrentLanguage();
  setLanguage(currentLang);
  updateLangIcon(currentLang);
  
  // Ajouter l'√©couteur d'√©v√©nement pour le bouton de langue
  const langToggle = document.getElementById('langToggle');
  if (langToggle) {
    langToggle.addEventListener('click', function() {
      const currentLang = getCurrentLanguage();
      const newLang = currentLang === 'en' ? 'fr' : 'en';
      setLanguage(newLang);
      updateLangIcon(newLang);
    });
  }
  
  // Initialiser le mode sombre
  initDarkMode();
  
  // Initialiser le scroll smooth
  initSmoothScroll();
});
